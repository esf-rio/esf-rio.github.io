name: GitHub Actions Demo
run-name: ${{ github.actor }} is testing out GitHub Actions ðŸš€
on: [push]
jobs:
  Explore-GitHub-Actions:
    runs-on: ubuntu-latest
    services:
      docker:
        image: docker:dind
        options: --privileged --shm-size=2g
        volumes:
          - /var/run/docker.sock:/var/run/docker.sock:ro

    container:
      image: ubuntu:latest

    steps:
      - name: Check out repository code
        uses: actions/checkout@v5      
      - name: Install Docker
        run: |
          apt-get update
          apt-get install -y docker.io
      - name: Build Application
        run: |
          cd website
          docker build -t esf-website:0.0.1 .
          docker image ls
      - name: Run Application
        run: |
          docker run -d -p 8080:80 -it esf-website:0.0.1
          docker ps
          ss -tunl
      - name: Install NPM
        run: |
          apt update
          apt install nodejs -y
          apt install npm -y
          npm -v
      - name: Install Cypress
        run: |
          cd website
          apt update
          apt-get install libgtk-3-0t64 libgbm-dev libnotify-dev libnss3 libxss1 libasound2t64 libxtst6 xauth xvfb -y
          npm install cypress --save-dev
          npx cypress --help
      - name: Run Test
        run: |
          cd website
          npx cypress run
          